<%= form_with model: [section, issue], class: "issue_form" do |f| %>
  <div>
    <%= f.label :title %>
    <%= f.text_field :title, placeholder: "Enter the issue title here" %>
    <% if issue.errors[:title].any? %>
      <div class="error_message">
        <ul>
          <% issue.errors[:title].each do |error| %>
            <li><%= error %></li>
          <% end %>
        </ul>
      </div>
    <% end %>
  </div>

  <div>
    <%= f.label :problem %>
    <%= f.text_area :problem, placeholder: "Describe the problem in detail" %>
  </div>

  <div>
    <%= f.label :solution %>
    <%= f.text_area :solution, placeholder: "Provide the solution here" %>
  </div>

  <div id="solved">
    <%= f.label :solved %>
    <%= f.check_box :solved %>
  </div>

  <div class="image_file">
    <%= f.label :image %>

    <% if issue.image.attached? %>
      <div class="image_preview">
        <p>Current Image:</p>
        <%= image_tag issue.image, alt: "Current Image", class: "preview" %>
      </div>
    <% end %>

    <%= f.file_field :image %>
    <small>Choose an image (optional)</small>
  </div>

  <div>
    <%= f.submit %>
  </div>
<% end %>
